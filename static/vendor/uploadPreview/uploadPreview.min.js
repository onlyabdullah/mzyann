!function($){$.extend({uploadPreview:function(options){var settings=$.extend({input_field:".image-input",preview_box:".image-preview",label_field:".image-label",label_default:"Choose File",label_selected:"Change File",no_label:!1,success_callback:null},options);if(!(window.File&&window.FileList&&window.FileReader))return alert("You need a browser with file reader support, to use this form properly."),!1;void 0!==$(settings.input_field)&&null!==$(settings.input_field)&&$(settings.input_field).change(function(){var files=this.files;if(files.length>0){var file=files[0],reader=new FileReader;reader.addEventListener("load",function(event){var loadedFile=event.target;file.type.match("image")?($(settings.preview_box).css("background-image","url("+loadedFile.result+")"),$(settings.preview_box).css("background-size","cover"),$(settings.preview_box).css("background-position","center center")):file.type.match("audio")?$(settings.preview_box).html("<audio controls><source src='"+loadedFile.result+"' type='"+file.type+"' />Your browser does not support the audio element.</audio>"):alert("This file type is not supported yet.")}),0==settings.no_label&&$(settings.label_field).html(settings.label_selected),reader.readAsDataURL(file),settings.success_callback&&settings.success_callback()}else 0==settings.no_label&&$(settings.label_field).html(settings.label_default),$(settings.preview_box+" audio").remove()})}})}(jQuery);